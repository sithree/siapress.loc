<?php

class sd_keywords {

    var $word_length_min = 3; // минимальное слово
    var $words_count = 10; // количество ключевых слов
    var $meta = false; // true - возвращает готовый мета тег, иначе будет массив

    function keywords($_text) {
        setlocale(LC_ALL, 'ru_RU.CP1251');
        $search = array("'ё'",
            "'<script[^>]*?>.*?</script>'si", // Вырезается javascript
            "'<[\/\!]*?[^<>]*?>'si", // Вырезаются html-теги
            "'([\r\n])[\s]+'", // Вырезается пустое пространство
            // Замещаются html-элементы
            "'&quot;'i", "'&amp;'i", "'&lt;'i", "'&gt;'i", "'&nbsp;'i",
            "'&iexcl;'i", "'&cent;'i", "'&pound;'i", "'&copy;'i", "'&#(\d+);'e");
        $replace = array('е', ' ', ' ', "\\1 ", '" ', ' ', ' ', ' ', ' ',
            chr(161), chr(162), chr(163), chr(169), "chr(\\1)");

        $text = strip_tags($_text);# preg_replace($search, $replace, $_text); // избавляемся в тексте от всякой html фигни
        // по каким то причинам жопы в preg_match_all приходится извращаться с кодировкой
        // отбираем из текст слова (из кодирвоки cp1251)
        preg_match_all("#(\w+)#si", iconv('UTF-8', 'cp1251', $text), $words_all);
        // массив стоп слов, которые включать по любасу не нужно
        $words_stop = array(
            '0','1','2','3','4','5','6','7','8','9', 'nbsp', '..ля','3jp','abilify','access','accupril','accuretic','accutane','acebutolol','acetaminophen','acetasalacylic','achromycin','aciphex','acomplia','actigall','actonel','actos','acyclovir','adalat','addtopic','adderall','adult','advair','advicor','advil','aggrenox','aids','albuterol','aldactazide','aldactone','aldomet','alendronate','aleve','allegra','allopurinol','aloprim','alprazolam','alrex','altace','altoprev','amaryl','ambien','amiloride','amiodarone','amitriptyline','amlodipine','amoxicillin','amoxil','amphetamine','anastrozole','androderm','androgel','anti-anxiety','anti-depressants','antivert','apresoline','arava','aricept','arimidex','aripiprazole','arthrotec','asacol','aspirin','astelin','atacand','atarax','atenolol','ativan','atorvastatin','atromid','atropine','atrovent','augmentin','avalide','avandia','avapro','avodart','axid','azathioprine','azelastine','azithromycin','azmacort','baclofen','bactrim','bb','bbs','benadryl','benazepril','benemid','benicar','benzonatate','bepridil','betagan','betapace','betaxolol','betimol','betoptic','bilify','blackjack','board','book','bull','bulletin','bupropion','buspar','buspirone','buy','carisoprodol','casino','celebrex','celecoxib','celexa','cgi','cheap','cialis','citalopram','clonazepam','cocaine','crack','craps','credit','cyclobenzaprine','cymbalta','ddos','del','detox','detoxifying','diazepam','diclofenac','diplom','disc','doxycycline','drug','drugstore','duloxetine','effexor','erectile','escitalopram','escort','eskort','estradiol','eszopiclone','facecontrol','famvir','finasteride','flomax','fluoxetine','forex','foro','forum','free','fорум','g','gb','generi','generics','goldfishka','gp','guest','hack','haldol','haloperidol','hentai','hotel','index','insurance','intim','invision','ionamin','ip','ipb','isp','keygen','klonopin','lamictal','levaquin','levitra','lexapro','lisinopril','loan','loans','logged','lorazepam','marijuana','mortgage','mp','nasal','new','newtopic','norvasc','olanzapine','order','orlistat','pain','paroxetine','paxil','pharmacies','pharmacy','phenergan','phentermine','phentramin','phorum','phpbb','plavix','playboy','porn','porno','post','prednisone','prevacid','propecia','prosak','protonix','prozac','prozak','purchase','read','reductil','relief','remeron','rimonabant','risperdal','risperidone','search','send','sertraline','sex','sexparty','sexshop','share','sildenafil','sleep','spice','sql','tadalafil','thread','topic','torrent','tramadol','tube','ultimatebb','valium','vardenafil','vbulletin','venlafaxine','viagra','vipxxx','warez','wellbutrin','xanax','xenical','xml','xxx','yabb','zo','zoloft','zolpidem','zoo','zyprexa','а','а-а','а-а-а','аборт','абсолютно','авось','автоматически','автосерфинг','автосёрфинг','ага','агрессивно','адалт','адекватно','адулт','аж','азартно','азартные','азиатки','ай','аккурат','аккуратно','активно','але','алло','аминь','ан','аналогично','атестат','атестаты','аттестат','аттестаты','ах','б','бегло','бегом','беда','бедно','без','без','безвозвратно','бездумно','безжалостно','беззаботно','беззвучно','безмерно','безмолвно','безмятежно','безнадежно','безнаказанно','безо','безоговорочно','безопасно','безошибочно','безразлично','безропотно','безукоризненно','безумно','безупречно','безусловно','безуспешно','бен','бережно','бесконечно','бескорыстно','беспечно','бесплатно','бесповоротно','беспокойно','бесполезно','беспомощно','беспорядочно','блядь','более','более','бы','бы','был','была','были','было','было','быть','важно','важно','вам','варез','вас','вдоль','вдоль','весь','весь','взлом','виагра','виагру','вместо','вместо','внутри','внутри','вокруг','вокруг','восемь','вот','вот','всегда','всегда','всего','всего','всех','гадалка','гадание','гашиш','геи','гинекология','голая','голый','д','да','да','давать','даже','даже','два','ддос','девять','детально','детально','детскоепорно','диплом','дипломы','для','для','добавить','добавлениекомментария','дог','е','ё','ее','ее','её','есть','ещё','же','же','жевотн','животн','з','заисключением','звере','звери','зверь','зверя','здесь','здесь','знакомств','знакомства','зоо','из','из','изверг','или','или','им','иметь','индивидуалки','инцест','к','к','казино','каталогсайтов','кейген','ко','ко','кобы','комеди','коне','конем','конём','кони','контакты','конь','кошка','кроме','кроме','кряк','кряки','кто','кто','курительные','курсовую','л','левитра','лоша','м','м','мне','может','может','мои','мы','мы','на','на','над','над','накрутка','наркотик','насилие','наш','наш','него','нее','неё','них','ноль','ну','ну','о','о','он','они','они','оно','оно','оргия','от','от','отлично','отлично','п','парни','педо','пиздец','писька','питбул','по','по','под','под','покер','порн','порнo','порно','порнуха','после','после','потомучто','почти','почти','прерывание','приворот','про','про','промо','проститутка','проститутки','проституция','псина','псиной','псом','пять','р','рассылкидлябизнеса','сабак','саунд','сглаз','секс','секспати','сексшоп','семенович','семь','серийник','сиалис','сисек','скачатьбесплатно','слоном','смотрите','со','со','собак','создать','спайс','спам','спамрассылки','стриптиз','сука','т','так','так','также','также','такие','там','там','те','тем','тем','того','тоже','тоже','той','только','только','том','топик','трах','трахать','трахаются','три','тут','тут','ты','ты','у','ублюдок','уже','уже','умело','ф','фаллоимитатор','фетиш','форум','футбол','х','хoodia','хентай','ххх','ц','ч','чей','чей','чем','чем','четыре','член','чтобы','чтобы','чье','чьё','чья','ш','шесть','щ','ы','ь','элитныерассылки','энтеоген','энтеогены','эротика','эскорт','эта','эти','это','это','ю','юмор','я','я','японки','беспощадно','беспрепятственно','беспрерывно','беспрестанно','бессильно','бесследно','бессмысленно','бессознательно','бесспорно','бесстрастно','бесстрашно','бесцельно','бесцеремонно','бесшумно','бешено','биологически','битком','бишь','благо','благодарно','благодаря','благополучно','благосклонно','блаженно','блестяще','близ','близко','блин','богато','бодро','боже','бойко','более-менее','болезненно','больно','больше','босиком','браво','брезгливо','будто','буквально','буль-буль','бурно','бывало','быстренько','быстро','быстро-быстро','в','ван','ваш','вблизи','вбок','вверх','вверху','ввиду','ввысь','вглубь','вдалеке','вдали','вдаль','вдвое','вдвоем','вдвойне','вдобавок','вдоволь','вдогонку','вдохновенно','вдребезги','вдруг','ведь','вежливо','везде','великодушно','великолепно','величественно','вернее','верно','вероятно','вертикально','верхом','весело','весьма','вечно','взад-вперед','взаимно','взаймы','взамен','взахлеб','взволнованно','видать','видимо','видно','виновато','виртуозно','вишь','включая','включительно','вконец','вкрадчиво','вкратце','вкупе','вкусно','властно','влево','вместе','вмиг','вначале','вне','внезапно','внешне','вниз','внизу','внимательно','вновь','внутренне','внутрь','внятно','во','вовремя','вовсе','вовсю','во-вторых','воедино','возбужденно','возле','возможно','возмущенно','воистину','волей-неволей','вольно','вон','вообще','вообще-то','воочию','во-первых','вопреки','вопросительно','восвояси','восторженно','восхищенно','вот-вот','впервые','вперед','впереди','вперемешку','вплотную','вплоть','вполголоса','вполне','впору','впоследствии','вправду','вправе','вправо','впредь','впрок','впрочем','впрямь','впустую','враз','врасплох','временно','вровень','вроде','врозь','вручную','вряд','все','все-все','всего-навсего','всего-то','всемирно','всерьез','всесторонне','все-таки','всецело','вскользь','вскоре','вслед','вследствие','вслепую','вслух','вспять','всюду','всякий','всякое','всячески','втайне','вторично','в-третьих','втрое','втроем','вчера','вчетвером','в-четвертых','вы','выгодно','вызывающе','выразительно','высоко','выше','вяло','гармонично','где','где-нибудь','где-то','генетически','гениально','главное','гладко','глубоко','глупо','глухо','гм','гневно','говорят','гораздо','гордо','горестно','горько','горячо','господи','грамотно','грех','грозно','громко','грубо','грустно','грязно','гулко','густо','да-а','дабы','давай','давай-ка','давайте','давеча','давненько','давно','давным-давно','да-да','дак','далее','далеко','далеко-далеко','данный','даром','дважды','де','действительно','деликатно','деловито','демонстративно','дескать','дешево','ди','дико','динамично','длинно','до','добро','добровольно','добродушно','доброжелательно','добросовестно','доверительно','доверху','доверчиво','довольно','довольно-таки','документально','долго','долго-долго','должно','долой','дома','домой','донельзя','доподлинно','допоздна','дополнительно','допустим','дорого','досадливо','доселе','дословно','досрочно','достаточно','достоверно','достойно','другое','другой','дружелюбно','дружески','дружно','дурно','духовно','душевно','душно','дыбом','его','едва','единогласно','единодушно','единожды','единственно','ежегодно','ежедневно','ежели','ежемесячно','ей-богу','еле','еле-еле','если','естественно','ехидно','еще','ж','жадно','жалко','жалобно','жаль','жарко','желательно','жестко','жестоко','живо','живьем','жизненно','жутко','за','забавно','заблаговременно','заботливо','заведомо','завтра','загадочно','загодя','задолго','задумчиво','заживо','законно','законодательно','заметно','замечательно','замуж','замужем','заново','заодно','заочно','запросто','заранее','застенчиво','затем','зато','зачастую','зачем','зачем-то','зверски','звонко','здорово','здравствуйте','здрасте','зло','злобно','зловеще','злорадно','значит','значительно','зорко','зря','зябко','и','ибо','идеально','идеологически','известно','извне','издавна','издалека','издали','из-за','излишне','изначально','изнутри','изо','из-под','изредка','изрядно','изумительно','изумленно','изящно','иль','именно','имхо','иначе','индивидуально','иногда','иной','инстинктивно','интенсивно','интересно','интуитивно','иронически','исключая','исключительно','искоса','искренне','искусно','искусственно','исподволь','исподлобья','испокон','исправно','испуганно','истинно','истово','исторически','итак','итого','их','ихний','ишь','ка','кабы','каждый','кажется','как','как-нибудь','как-никак','каков','каковой','какой','какой-либо','какой-нибудь','какой-никакой','какой-то','как-то','кардинально','катастрофически','категорически','качественно','кверху','классно','книзу','когда','когда-либо','когда-нибудь','когда-то','кое','кое-где','кое-как','кое-какой','кое-кто','кое-что','кой','кокетливо','коли','коль','комфортно','конечно','конкретно','коротко','корректно','косвенно','косо','который','крайне','красиво','красноречиво','кратко','крепко','криво','критически','кротко','круглосуточно','кругом','крупно','круто','кстати','кто-либо','кто-нибудь','кто-то','куда','куда-нибудь','куда-то','культурно','ла','ладно','ласково','легко','легкомысленно','легонько','лениво','лень','ли','либо','лихо','лихорадочно','лично','лишь','ловко','логически','логично','лукаво','лучше','ль','любезно','любовно','любой','любопытно','максимально','маленько','мало','маловато','мало-мальски','мало-помалу','малость','марш','мастерски','материально','машинально','мгновенно','м-да','медленно','меж','между','мелко','мельком','менее','мерно','метко','методично','механически','мечтательно','мигом','мило','мимо','мимоходом','минимально','минус','мирно','миролюбиво','мм','м-м','многие','многий','много','многое','многозначительно','многократно','много-много','можно','мой','мол','молниеносно','молча','молчаливо','моментально','монотонно','морально','мощно','мрачно','мудро','мужественно','мучительно','мысленно','мягко','набок','навалом','навек','навеки','наверно','наверное','наверняка','наверх','наверху','навечно','навзничь','навсегда','навстречу','нагло','наглухо','наглядно','наголо','наготове','надвое','надежно','надменно','надо','надобно','надолго','наедине','назавтра','назад','назло','наиболее','наивно','наизнанку','наизусть','наименее','наискосок','накануне','наконец','налево','налицо','намеренно','намертво','намного','наоборот','наотрез','наперебой','наперед','наподобие','напоказ','наполовину','напоследок','направо','напрасно','например','напрокат','напролет','напротив','напрочь','напряженно','напрямик','напрямую','наравне','нарочито','нарочно','наружу','наряду','насильно','насквозь','насколько','наскоро','насмерть','насмешливо','насовсем','наспех','настежь','настойчиво','настолько','настороженно','настоятельно','насчет','нате','натурально','наугад','наутро','научно','нахально','начисто','наяву','не','небось','небрежно','неважно','невдалеке','неведомо','неверно','невероятно','невесело','невесть','невзирая','невзначай','невинно','невмоготу','невнятно','невозможно','невозмутимо','невольно','невпопад','невыгодно','невыносимо','негативно','негде','негромко','недавно','недалеко','недаром','недвусмысленно','недоверчиво','недовольно','недолго','недорого','недостаточно','недоуменно','неестественно','не-ет','нежели','нежно','независимо','незадолго','незаконно','незамедлительно','незаметно','незачем','незначительно','неизбежно','неизвестно','неизменно','неизмеримо','неимоверно','неинтересно','неистово','некий','некогда','некоторые','некоторый','некрасиво','некстати','некто','некуда','нелегко','нелепо','неловко','нельзя','немало','немедленно','немедля','неминуемо','немногие','немногий','немного','немногое','немножечко','немножко','немыслимо','ненадолго','ненароком','необходимо','необыкновенно','необычайно','необычно','необязательно','неоднократно','неодобрительно','неожиданно','неопределенно','неотвратимо','неотрывно','неотступно','неохота','неохотно','неплохо','неподалеку','неподвижно','непомерно','непонятно','непосредственно','неправдоподобно','неправильно','непременно','непрерывно','непривычно','неприлично','непринужденно','неприязненно','неприятно','непроизвольно','непросто','неразрывно','нервно','нередко','нерешительно','несколько','неслышно','несмотря','несомненно','неспешно','несправедливо','неспроста','несравненно','нестерпимо','нет','нетерпеливо','нет-нет','неторопливо','нетрудно','нету','неуверенно','неудачно','неудержимо','неудивительно','неудобно','неужели','неужто','неуклонно','неуклюже','неукоснительно','неуловимо','неумело','неумолимо','неустанно','неуютно','нехорошо','нехотя','нечасто','нечаянно','нечего','нечто','нещадно','неясно','ни','нибудь','нигде','ниже','низко','никак','никакой','никогда','никто','никуда','ниоткуда','нисколько','ничего','ничей','ничто','ничуть','но','нормально','нужно','ну-ка','ну-ну','ну-с','ныне','нынче','об','обидно','обиженно','обильно','облегченно','обо','обрадованно','образно','обратно','обреченно','обстоятельно','общественно','объективно','обыкновенно','обычно','обязательно','оглушительно','ого','один','одинаково','одиноко','однажды','однако','одновременно','однозначно','одобрительно','оживленно','озабоченно','озадаченно','ой','ок','около','окончательно','она','оный','о-о','оп','опасливо','опасно','оперативно','определенно','опять','опять-таки','органически','органично','ослепительно','основательно','особенно','особняком','особо','осознанно','остальное','остальной','остальные','осторожно','остро','остроумно','ответственно','отвратительно','отдаленно','отдельно','откровенно','открыто','откуда','откуда-то','относительно','отныне','отнюдь','ото','отовсюду','отрицательно','отрывисто','отсюда','оттого','оттуда','отчасти','отчаянно','отчего','отчего-то','отчетливо','официально','ох','охота','охотно','очевидно','очень','очень-очень','ошибочно','ощутимо','параллельно','пардон','паче','первоначально','перед','передо','периодически','печально','пешком','письменно','плавно','плотно','плохо','плюс','по-английски','победно','поблизости','по-вашему','поверх','по-видимому','повсеместно','повсюду','повторно','поголовно','подавно','по-детски','поди','подле','подлинно','подо','подобно','по-доброму','подозрительно','подолгу','по-домашнему','подробно','по-другому','подряд','подсознательно','подчас','пожалуй','пожалуйста','позавчера','позади','позарез','поздно','по-иному','поистине','пока','покорно','покуда','полезно','политически','полно','полностью','положено','положим','положительно','помаленьку','помимо','поминутно','по-моему','понаслышке','по-настоящему','поначалу','по-нашему','поневоле','по-немецки','понемногу','понимающе','по-новому','поныне','понятно','поодаль','поодиночке','поочередно','поперек','попеременно','пополам','по-прежнему','попросту','попутно','пора','поразительно','по-разному','поровну','порознь','порой','по-русски','порядком','порядочно','по-своему','посему','посередине','поскольку','последовательно','послезавтра','послушно','посмертно','поспешно','посреди','посредине','посредством','по-старому','постепенно','постоянно','потенциально','потихоньку','потом','потому','потому-то','потрясающе','поутру','по-французски','похоже','по-хозяйски','по-хорошему','по-человечески','почем','почему','почему-то','почтительно','поэтому','правда','правильно','право','празднично','практически','превосходно','превыше','пред','преданно','предварительно','предельно','предостаточно','предположительно','предусмотрительно','прежде','преждевременно','презрительно','преимущественно','прекрасно','пренебрежительно','при','приблизительно','приветливо','привычно','придирчиво','прилично','применительно','примерно','примечательно','примирительно','принципиально','принято','пристально','притом','причем','причудливо','приятно','проворно','произвольно','пронзительно','проникновенно','пропорционально','просто','простодушно','просто-напросто','просторно','против','противно','протяжно','профессионально','прохладно','прочее','прочий','прочно','прочь','прям','прямиком','прямо','прямо-таки','психически','психологически','публично','пускай','пусто','пусть','путем','пуще','равно','равнодушно','равномерно','ради','радикально','радостно','раз','разве','раздельно','раздраженно','разом','разочарованно','разумеется','разумно','ранее','рано','раньше','рассеянно','растерянно','реально','ревниво','регулярно','редко','резво','резко','резонно','решительно','робко','ровно','рядом','рядышком','с','сам','самовольно','самозабвенно','самолично','самостоятельно','самый','сбоку','сверх','сверху','светло','свирепо','свободно','свое','своевременно','свой','свойственно','свысока','свыше','свято','сгоряча','сдержанно','сдуру','се','себе','себя','сегодня','сей','сейчас','секретно','сердечно','сердито','серьезно','сзади','сие','сильно','систематически','скажем','скверно','сквозь','скептически','сколь','сколько','сколько-нибудь','сколько-то','скорбно','скоро','скромно','скупо','скучно','слабо','славно','сладко','слева','слегка','следовательно','следом','слепо','слишком','словно','словом','сложно','случайно','слышно','слышь','смело','смертельно','смешно','смиренно','смирно','смутно','смущенно','снаружи','сначала','снизу','снисходительно','снова','собственно','собственноручно','совершенно','совестно','совместно','совсем','согласно','сознательно','сокрушенно','солидно','сонно','сообща','соответственно','сосредоточенно','социально','сочувственно','спасибо','сперва','спереди','специально','спешно','сплошь','спокойно','сполна','справа','справедливо','спустя','сравнительно','сразу','среди','средь','сродни','сроду','срочно','стабильно','старательно','стихийно','стойко','столь','столько','столько-то','стоп','странно','страстно','стратегически','страшно','стремительно','строго','стыдливо','стыдно','сугубо','судорожно','суетливо','суждено','сурово','сухо','существенно','счас','счастливо','сыро','сюда','тайком','тайно','таинственно','таки','таков','таковой','такой','такой-то','тактично','так-то','там-то','твердо','твой','творчески','темно','теоретически','теперь','тепло','терпеливо','тесно','технически','типично','тихо','тихонечко','тихонько','то','тогда','тогда-то','толком','только-только','тонко','торжественно','торжествующе','торопливо','тоскливо','тот','то-то','тот-то','тотчас','точно','точь-в-точь','тошно','трагически','традиционно','требовательно','тревожно','трезво','трижды','трогательно','трудно','туго','туда','туда-сюда','туманно','тупо','тускло','тут-то','тщательно','тщетно','тьфу','тяжело','тяжко','убедительно','убежденно','уважительно','уверенно','увлеченно','увы','угодно','угрожающе','угрюмо','угу','удачно','удивительно','удивленно','удобно','удовлетворенно','уж','ужасно','уклончиво','укоризненно','украдкой','умеренно','уместно','умно','умоляюще','умышленно','уныло','упорно','упрямо','ура','усердно','усиленно','условно','услужливо','успешно','устало','утвердительно','ух','уютно','фактически','физически','философски','фон','формально','фу','ха','ха-ха','ха-ха-ха','хитро','хладнокровно','хм','хмуро','хо','ходуном','холодно','хорошенько','хорошо','хоть','хотя','хрипло','худо','целенаправленно','целесообразно','целиком','цепко','цинично','частенько','частично','часто','че','чего','чего-то','чей-нибудь','чей-то','через','чересчур','чертовски','честно','четко','чинно','чисто','чрезвычайно','чрезмерно','что','чтоб','что-либо','что-нибудь','что-то','чудесно','чудно','чудовищно','чудом','чутко','чуток','чуточку','чуть','чуть-чуть','шепотом','шибко','широко','шо','што','шумно','шутливо','шутя','щас','щедро','э','эдак','эдакий','эй','экий','экологически','экономически','экспериментально','элегантно','элементарно','эмоционально','энергично','этак','этакий','этот','эффективно','эффектно','эх','э-э','э-э-э','юридически','явно','явственно','язвительно','яко','якобы','ярко','яростно','ясно','этом','этой','которого','знаем','нас'
            );
        $kk = array();
        $cc = array();
        $ii = 0; // временные переменные
        $words_count = sizeof($words_all[0]); // узнаем общее количество слов в тексте
        for ($it = 0; $it < $words_count; $it++) {// пройтись по всем словам // преобразуем все к маленькому регистру, ибо поисковички все равно регистры не отличают
            $val_win = strtolower($words_all[0][$it]);

            $len = strlen($val_win); // определяем длину слова
            // если слово меньше минимума, то не включаем в список подсчета
            if ($len < $this->word_length_min) {
                continue;
            }

            $val_utf = iconv('cp1251', 'UTF-8', $val_win); // конвертируемся обратно в utf
            // если слово является стоп словом, то не включаем в нужный список
            if (array_search($val_utf, $words_stop)) {
                continue;
            }

            $id = array_search($val_utf, $kk); // проверка на наличие слова уже в списке
            if ($id > 0) {// если в списке уже есть, то
                $cc[$id]++; // увеличиваем количество
            } else {// если нет в списке
                $kk[$ii] = $val_utf; // записываем слово
                $cc[$ii] = 1; // кол-во в тексте
                $ii++;
            }
        }
        // преобразуем весь результат к единому массиву
        $c = sizeof($kk);
        for ($it = 0; $it < $c; $it++) {
            $ww[$kk[$it]] = $cc[$it];
        }
        if (count($ww) != 0)
            arsort($ww); // сортируем массив по кол-ву слов
        else
            return false;
        $keywords = array();
        $it = 0;
        foreach ($ww as $val => $key) {
            if ($it >= $this->words_count) {
                break;
            }
            $keywords[$it] = $val;
            $it++;
        }
        if ($this->meta) {
            $c = sizeof($keywords);
            $r = '<meta name="keywords" content="';
            for ($it = 0; $it < $c; $it++) {
                if (($it + 1) == $c) {
                    $r.=$keywords[$it];
                } else {
                    $r.=$keywords[$it] . ', ';
                }
            }
            $r.='" />';
        } else {
            $r = $keywords;
        }
        return $r;
    }

}
?>
